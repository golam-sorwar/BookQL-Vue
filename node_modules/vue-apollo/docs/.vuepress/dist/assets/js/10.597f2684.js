(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{182:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),a("ul",[t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),a("li",[a("code",[t._v("result(ApolloQueryResult)")]),t._v(" is a hook called when a result is received (see documentation for "),a("a",{attrs:{href:"https://github.com/apollographql/apollo-client/blob/master/packages/apollo-client/src/core/types.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("ApolloQueryResult"),a("OutboundLink")],1),t._v(").")]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),a("li",[a("code",[t._v("subscribeToMore")]),t._v(": an object or an array of object which are "),a("router-link",{attrs:{to:"./../guide/apollo/subscriptions.html#subscribetomore"}},[t._v("subscribeToMore options")]),t._v(".")],1),t._v(" "),a("li",[a("code",[t._v("prefetch")]),t._v(" is either a boolean or a function to determine if the query should be prefetched. See "),a("router-link",{attrs:{to:"./../guide/ssr.html"}},[t._v("Server-Side Rendering")]),t._v(".")],1)]),t._v(" "),a("p",[t._v("Example:")]),t._v(" "),t._m(13),t._m(14),t._v(" "),t._m(15),a("p",[t._v("Manual mode example:")]),t._v(" "),t._m(16),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._m(21),t._v(" "),a("p",[t._v("Whether the query is loading:")]),t._v(" "),t._m(22),t._m(23),t._v(" "),t._m(24),t._v(" "),a("p",[t._v("Stops and restarts the query:")]),t._v(" "),t._m(25),t._m(26),t._v(" "),a("p",[t._v("Starts the query:")]),t._v(" "),t._m(27),t._m(28),t._v(" "),a("p",[t._v("Stops the query:")]),t._v(" "),t._m(29),t._m(30),t._v(" "),a("p",[t._v("Load more data for pagination:")]),t._v(" "),t._m(31),t._m(32),t._v(" "),a("p",[t._v("Subscribe to more data using GraphQL subscriptions:")]),t._v(" "),t._m(33),t._m(34),t._v(" "),a("p",[t._v("Fetch the query again, optionally with new variables:")]),t._v(" "),t._m(35),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._m(39),t._v(" "),a("p",[t._v("Update the Apollo "),a("a",{attrs:{href:"https://www.apollographql.com/docs/react/api/apollo-client.html#ApolloClient.watchQuery",target:"_blank",rel:"noopener noreferrer"}},[t._v("watchQuery"),a("OutboundLink")],1),t._v(" options and refetch:")]),t._v(" "),t._m(40),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._m(44),t._v(" "),a("p",[t._v("Stop the polling:")]),t._v(" "),t._m(45)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"smart-query"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#smart-query","aria-hidden":"true"}},[this._v("#")]),this._v(" Smart Query")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Each query declared in the "),s("code",[this._v("apollo")]),this._v(" definition (that is, which doesn't start with a "),s("code",[this._v("$")]),this._v(" char) in a component results in the creation of a smart query object.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#options","aria-hidden":"true"}},[this._v("#")]),this._v(" Options")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("code",[this._v("query")]),this._v(": GraphQL document (can be a file or a "),s("code",[this._v("gql")]),this._v(" string).")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("code",[t._v("variables")]),t._v(": Object or reactive function that returns an object. Each key will be mapped with a "),a("code",[t._v("'$'")]),t._v(" in the GraphQL document, for example "),a("code",[t._v("foo")]),t._v(" will become "),a("code",[t._v("$foo")]),t._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("code",[this._v("throttle")]),this._v(": throttle variables updates (in ms).")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("code",[this._v("debounce")]),this._v(": debounce variables updates (in ms).")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("code",[this._v("update(data) {return ...}")]),this._v(" to customize the value that is set in the vue property, for example if the field names don't match.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("code",[t._v("error(error)")]),t._v(" is a hook called when there are errors. "),a("code",[t._v("error")]),t._v(" is an Apollo error object with either a "),a("code",[t._v("graphQLErrors")]),t._v(" property or a "),a("code",[t._v("networkError")]),t._v(" property.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("code",[this._v("loadingKey")]),this._v(" will update the component data property you pass as the value. You should initialize this property to "),s("code",[this._v("0")]),this._v(" in the component "),s("code",[this._v("data()")]),this._v(" hook. When the query is loading, this property will be incremented by 1; when it is no longer loading, it will be decremented by 1. That way, the property can represent a counter of currently loading queries.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("code",[t._v("watchLoading(isLoading, countModifier)")]),t._v(" is a hook called when the loading state of the query changes. The "),a("code",[t._v("countModifier")]),t._v(" parameter is either equal to "),a("code",[t._v("1")]),t._v(" when the query is loading, or "),a("code",[t._v("-1")]),t._v(" when the query is no longer loading.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("code",[this._v("manual")]),this._v(" is a boolean to disable the automatic property update. If you use it, you then need to specify a "),s("code",[this._v("result")]),this._v(" callback (see example below).")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("code",[this._v("deep")]),this._v(" is a boolean to use "),s("code",[this._v("deep: true")]),this._v(" on Vue watchers.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// Apollo-specific options")]),t._v("\napollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// Advanced query with parameters")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// The 'variables' method is watched by vue")]),t._v("\n  pingMessage"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    query"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gql"),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`query PingMessage($message: String!) {\n      ping(message: $message)\n    }`")])]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// Reactive parameters")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("variables")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// Use vue reactive properties here")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          message"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pingInput"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// Variables: deep object watch")]),t._v("\n    deep"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// We use a custom update callback because")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// the field names don't match")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// By default, the 'pingMessage' attribute")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// would be used on the 'data' result object")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// Here we know the result is in the 'ping' attribute")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// considering the way the apollo server works")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("update")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// The returned value will update")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// the vue property 'pingMessage'")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" data"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ping\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// Optional result hook")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("result")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" data"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" loading"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" networkStatus "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"We got some result!"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// Error handling")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("error")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("error")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'We\\'ve got an error!'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// Loading state")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// loadingKey is the name of the data property")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// that will be incremented when the query is loading")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// and decremented when it no longer is.")]),t._v("\n    loadingKey"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'loadingQueriesCount'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// watchLoading will be called whenever the loading state changes")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("watchLoading")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isLoading"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" countModifier"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// isLoading is a boolean")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// countModifier is either 1 or -1")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If you use "),s("code",[this._v("ES2015")]),this._v(", you can also write the "),s("code",[this._v("update")]),this._v(" like this:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[this._v("update"),s("span",{attrs:{class:"token punctuation"}},[this._v(":")]),this._v(" data "),s("span",{attrs:{class:"token operator"}},[this._v("=>")]),this._v(" data"),s("span",{attrs:{class:"token punctuation"}},[this._v(".")]),this._v("ping\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  query"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gql"),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`...`")])]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  manual"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("result")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" data"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" loading "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v("loading"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("items "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" data"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("items\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#properties","aria-hidden":"true"}},[this._v("#")]),this._v(" Properties")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"skip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#skip","aria-hidden":"true"}},[this._v("#")]),this._v(" Skip")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("You can pause or unpause with "),s("code",[this._v("skip")]),this._v(":")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("skip "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"loading"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loading","aria-hidden":"true"}},[this._v("#")]),this._v(" loading")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loading\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"methods"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#methods","aria-hidden":"true"}},[this._v("#")]),this._v(" Methods")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"refresh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#refresh","aria-hidden":"true"}},[this._v("#")]),this._v(" refresh")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("refresh")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"start"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#start","aria-hidden":"true"}},[this._v("#")]),this._v(" start")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("start")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"stop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stop","aria-hidden":"true"}},[this._v("#")]),this._v(" stop")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("stop")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"fetchmore"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fetchmore","aria-hidden":"true"}},[this._v("#")]),this._v(" fetchMore")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("page"),a("span",{attrs:{class:"token operator"}},[t._v("++")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagsPage"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("fetchMore")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// New variables")]),t._v("\n  variables"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    page"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("page"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    pageSize"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// Transform the previous result with new data")]),t._v("\n  updateQuery"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("previousResult"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" fetchMoreResult "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newTags "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" fetchMoreResult"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagsPage"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tags\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hasMore "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" fetchMoreResult"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagsPage"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hasMore\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("showMoreEnabled "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" hasMore\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      tagsPage"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        __typename"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" previousResult"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagsPage"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__typename"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// Merging the tag list")]),t._v("\n        tags"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("previousResult"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagsPage"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tags"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("newTags"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        hasMore"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"subscribetomore"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#subscribetomore","aria-hidden":"true"}},[this._v("#")]),this._v(" subscribeToMore")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// We need to unsubscribe before re-subscribing")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagsSub"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagsSub"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("unsubscribe")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// Subscribe on the query")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagsSub "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tags"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("subscribeToMore")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  document"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("TAG_ADDED")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  variables"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    type"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// Mutate the previous result")]),t._v("\n  updateQuery"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("previousResult"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" subscriptionData "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// If we added the tag already don't do anything")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// This can be caused by the `updateQuery` of our addTag mutation")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("previousResult"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tags"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("find")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" subscriptionData"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagAdded"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" previousResult\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      tags"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("previousResult"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tags"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// Add the new tag")]),t._v("\n        subscriptionData"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagAdded"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"refetch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#refetch","aria-hidden":"true"}},[this._v("#")]),this._v(" refetch")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("refetch")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// With new variables")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("refetch")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  friendsOf"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'id-user'")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"setvariables"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setvariables","aria-hidden":"true"}},[this._v("#")]),this._v(" setVariables")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Update the variables on the query and refetch it if they have changed. To force a refetch, use "),s("code",[this._v("refetch")]),this._v(".")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("setVariables")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  friendsOf"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'id-user'")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"setoptions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setoptions","aria-hidden":"true"}},[this._v("#")]),this._v(" setOptions")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("setOptions")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fetchPolicy"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'cache-and-network'")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"startpolling"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#startpolling","aria-hidden":"true"}},[this._v("#")]),this._v(" startPolling")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Start an auto update using polling (which means refetching every "),s("code",[this._v("x")]),this._v(" ms):")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("startPolling")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("2000")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// ms")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"stoppolling"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stoppolling","aria-hidden":"true"}},[this._v("#")]),this._v(" stopPolling")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$apollo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("stopPolling")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])}],!1,null,null,null);e.options.__file="smart-query.md";s.default=e.exports}}]);